Домашнее задание к занятию "11.2 Микросервисы: принципы»  

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

**Задача 1: API Gateway**

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.

**Ответ:**

Требования в задании к шлюзу имеют, на мой взляд, базовый функционал, которым обладают почти любые API шлюзы.
Предлагаемое решение по данному вопросу привожу в таблице: 

| Решение | Маршрутизация | Аутентификация | Терминация HTTPS |
|---|---|---|---|
| Kong | + | + | + |
| Tyk.io | + | + | + |
| Apache APISIX | + | + | + |
| APIGee | + | + | + |
| Amazon AWS API Gateway | + | + | - |
| Azure API Gateway | + | + | + |
| NGINX Plus | + | + | + |
| KrakenD | + | + | + |

В связи с санкциями наложенными на нашу страну, я бы рассматривал только open-source решениями, такие как Kong и Apache APISIX. По фукнционалу подходят все решения.

**Задача 2: Брокер сообщений**

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

**Ответ:**

| Параметр | RabbitMQ | Apache Kafka | ActiveMQ | NATS | Redis |
|:---|:---:|:---:|:---:|:---:|:---:|
| Поддержка кластеризации для обеспечения надежности | + | + | + | + | + |
| Хранение сообщений на диске в процессе доставки | + | + | + | + | + |
| Высокая скорость работы | +- | + | - | + | + |
| Поддержка различных форматов сообщений | AMQP, MQTT, STOMP | Только binary через TCP Socket | 10 форматов, включая AMQP, AUTO, MQTT, REST | Только NATS Streaming Protocol | Только RESP |
| Разделение прав доступа к различным потокам сообщений | + | + | + | + | + |
| Простота эксплуатации | + | - | + | + | + |

Выбор подходящего варианта брокера сообщений зависит от конкретных потребностей и ограничений проекта: цель использования, предполагаемая нагрузка, количество потребителей, приоритетность доставки над производительностью и многое другое.

На текущий момент одними из наиболее распространённых брокеров являются Kafka, RabbitMQ и Redis. Каждый из них обладает своими достоинствами и недостатками. 

