# Домашнее задание к занятию "6.1 Типы и структура СУБД"  

Задача 1. Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.  
Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД (Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор):

```text
1. Электронные чеки в json виде — документоориентированная система управления базами данных, не требующая описания схемы таблиц. Считается одним из классических примеров NoSQL-систем, использует JSON-подобные документы и схему базы данных.

2. Склады и автомобильные дороги для логистической компании — Neo4j — графовая система управления базами данных, есть поддержка ACID. Удобная и наиболее понятная визуальная система описания данных. Обычно используются в геоинформационных системах, логистике, социальных сетях и т.п.

3. Генеалогические деревья — иерархическая БД, подойдет реляционная БД, т.к. архитектура реляционных баз данных ориентирована на хранение внутри таблиц БД информации о сущностях информационной системы и связях между ними.

4. Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации — подойдет Memcached, где каждый пользователь сохраняется по данным ключ=>значение. Пользователь вводит свои аутентификационные данные — login и пароль, система получает данные пользователя из MemcacheDB по ключу user_login и проводит аутентификацию.

5. Отношения клиент-покупка для интернет-магазина — реляционные БД, например, Postgres или MySQL. Для крупных торговых площадок лучше использовать документоориентированные
СУБД, например, MongoDB, за счет масштабирования, высокой надежности и производительности.
```

Задача 2. Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию) А согласно PACELC-теореме, как бы вы классифицировали данные реализации?:  

```text
Данные записываются на все узлы с задержкой до часа (асинхронная запись) - по CAP это будет система AP, по PACELC - PC/EL  

При сетевых сбоях, система может разделиться на 2 раздельных кластера - по CAP это будет система CA, по PACELC - PA-EС  

Система может не прислать корректный ответ или сбросить соединение - по CAP это будет система CP, по PACELC - PA-EC
```

Задача 3. Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?  

```text
Теоретически - нет, т.к. эти два принципа противоположны друг другу. В ACID системах атомарность транзакций гарантирует, что каждая транзакция базы данных является единым блоком, который использует подход «все или ничего» к выполнению. Если какой-либо оператор в транзакции терпит неудачу, вся транзакция откатывается. Также обеспечивается согласованность каждой транзакции с бизнес-правилами базы данных. Если какой-либо элемент атомарной транзакции нарушит целостность базы данных, вся транзакция завершится неудачно. В BASE системах, наоборот, фокус на доступности данных даже при наличии множества сбоев. Базы данных BASE почти полностью отказываются от требований согласованности. Единственное требование, которое базы данных BASE имеют в отношении согласованности, – это требование, чтобы в какой-то момент в будущем данные конвергировались в согласованное состояние. Однако никаких гарантий относительно того, когда это произойдет, не дается.
```

Задача 4. Вам дали задачу написать системное решение, основой которого бы послужили:  

```text
фиксация некоторых значений с временем жизни  
реакция на истечение таймаута  

Подойдет key-value система (redis, memcached)
```

Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?

```text
Redis — достаточно популярный инструмент, который из коробки поддерживает большое количество различных типов данных и методов работы с ними. Pub/sub — механизм, который позволяет, с одной стороны, подписаться на канал и получать сообщения из него, с другой стороны — отправлять в этот канал сообщение, которое будет получено всеми подписчиками.  

Минусы:  
- сложности при работе с большими объемами данных, в частности объем данных не должен превышать объем свободного ОЗУ сервера, иначе работа замедлится
- Это NoSQL - никакого языка SQL, LUA скриптинг в качестве альтернативы
- есть риск не сохранения данных
- сложности с настройкой кластера и шардингом
- нет сегментации на пользователей или группы пользователей. Отсутствует контроль доступа. Доступ по общему паролю.
```
